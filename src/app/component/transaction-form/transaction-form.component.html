<h2 mat-dialog-title>{{inputData.title}} Transaction</h2>
<mat-dialog-content>
    <form [formGroup]="transactionForm" (ngSubmit)="saveTransaction()">
        <mat-form-field appearance="outline" *ngIf="selectedType !== 'interest'">
            <mat-label>Ticker</mat-label>
            <input matInput formControlName="ticker">
        </mat-form-field>

        <mat-form-field appearance="outline"
            *ngIf="selectedType === 'put' || selectedType === 'call' || selectedType === 'stock'">
            <mat-label>Open Side</mat-label>
            <mat-select formControlName="openSide">
                <mat-option value="buy-to-open" *ngIf="selectedType === 'put' || selectedType === 'call'">Buy to
                    Open</mat-option>
                <mat-option value="sell-to-open" *ngIf="selectedType === 'put' || selectedType === 'call'">Sell to
                    Open</mat-option>
                <mat-option value="buy-to-close" *ngIf="selectedType === 'put' || selectedType === 'call'">Buy to
                    Close</mat-option>
                <mat-option value="sell-to-close" *ngIf="selectedType === 'put' || selectedType === 'call'">Sell to
                    Close</mat-option>
                <mat-option value="buy" *ngIf="selectedType === 'stock'">Buy</mat-option>
                <mat-option value="sell" *ngIf="selectedType === 'stock'">Sell</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" *ngIf="selectedType === 'put' || selectedType === 'call'">
            <mat-label>Close Side</mat-label>
            <mat-select formControlName="closeSide">
                <mat-option value="null" *ngIf="selectedType === 'put' || selectedType === 'call'"> </mat-option>
                <mat-option value="buy-to-close" *ngIf="selectedType === 'put' || selectedType === 'call'">Buy to
                    Close</mat-option>
                <mat-option value="sell-to-close" *ngIf="selectedType === 'put' || selectedType === 'call'">Sell to
                    Close</mat-option>
                <mat-option value="assignment"
                    *ngIf="selectedType === 'put' || selectedType === 'call'">Assignment</mat-option>
                <mat-option value="expiration"
                    *ngIf="selectedType === 'put' || selectedType === 'call'">Expiration</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field floatLabel="always" appearance="outline"
            *ngIf="selectedType === 'put' || selectedType === 'call' || selectedType === 'stock'">
            <mat-label>Quantity</mat-label>
            <input matInput type="number" placeholder="1" formControlName="quantity" />
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Type</mat-label>
            <mat-select formControlName="type" [(value)]="selectedType">
                <mat-option value="call">Call</mat-option>
                <mat-option value="put">Put</mat-option>
                <mat-option value="stock">Stock</mat-option>
                <mat-option value="dividend">Dividend</mat-option>
                <mat-option value="interest">Interest</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field floatLabel="always" appearance="outline"
            *ngIf="selectedType === 'put' || selectedType === 'call'">
            <mat-label>Strike</mat-label>
            <input matInput type="number" placeholder="0" formControlName="strike" />
        </mat-form-field>

        <mat-form-field appearance="outline" *ngIf="selectedType === 'put' || selectedType === 'call'">
            <mat-label>Expiration</mat-label>
            <input matInput [matDatepicker]="expirationDatePicker" formControlName="expiration">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="expirationDatePicker"></mat-datepicker-toggle>
            <mat-datepicker [dateClass]="dateClass" #expirationDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field floatLabel="always" appearance="outline" [ariaDisabled]="premiumFieldDisabled">
            <mat-label>Premium</mat-label>
            <input matInput type="number" placeholder="0.00" formControlName="premium"/>
            <span matTextPrefix>$&nbsp;</span>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Open Date</mat-label>
            <input matInput [matDatepicker]="openDatePicker" formControlName="openDate">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="openDatePicker"></mat-datepicker-toggle>
            <mat-datepicker [dateClass]="dateClass" #openDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field floatLabel="always" appearance="outline"
            *ngIf="selectedType === 'put' || selectedType === 'call' || selectedType === 'stock'">
            <mat-label>Open Amount</mat-label>
            <input matInput type="number" placeholder="0.00" formControlName="openAmount" (ngModelChange)="premiumUpdate($event)"/>
            <span matTextPrefix>$&nbsp;</span>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Close Date</mat-label>
            <input matInput [matDatepicker]="closeDatePicker" formControlName="closeDate">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="closeDatePicker"></mat-datepicker-toggle>
            <mat-datepicker [dateClass]="dateClass" #closeDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field floatLabel="always" appearance="outline"
            *ngIf="selectedType === 'put' || selectedType === 'call' || selectedType === 'stock'">
            <mat-label>Close Amount</mat-label>
            <input matInput type="number" placeholder="0.00" formControlName="closeAmount" (ngModelChange)="premiumUpdate($event)"/>
            <span matTextPrefix>$&nbsp;</span>
        </mat-form-field>

        <mat-form-field floatLabel="always" appearance="outline">
            <mat-label>Year</mat-label>
            <input matInput type="number" formControlName="year" />
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Group</mat-label>
            <input matInput formControlName="group">
        </mat-form-field>

        <p>
            <mat-checkbox matInput formControlName="assigned"
                *ngIf="selectedType === 'put' || selectedType === 'call'">Assigned</mat-checkbox>
        </p>
        <div *ngIf="stockOpenTrades.length > 0">
            <p></p>
            <table mat-table [dataSource]="tableDataSource" class="mat-elevation-z8">
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element">
                        <mat-checkbox (change)="onCheckboxClick($event, element.id)"></mat-checkbox>
                    </td>
                </ng-container>

                <ng-container matColumnDef="transaction">
                    <th mat-header-cell *matHeaderCellDef> Transaction</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.openSide | customSide}}
                        {{element.quantity}}
                        {{element.ticker}}
                        {{element.expiration | date:'MMM dd, yyyy'}}
                        {{element.strike | currency: 'USD' : 'symbol' : '1.0-2' }}
                        {{element.type | customType}}
                        <span *ngIf="element.type ==='stock'">@ {{getAbs(element.premium / element.quantity) | currency:
                            'USD' : 'symbol' : '1.0-2'}}</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="openDate">
                    <th mat-header-cell *matHeaderCellDef> Open Date</th>
                    <td mat-cell *matCellDef="let element">{{element.openDate | date:'MMM dd, yyyy'}}</td>
                </ng-container>

                <ng-container matColumnDef="closeDate">
                    <th mat-header-cell *matHeaderCellDef> Close Date</th>
                    <td mat-cell *matCellDef="let element">{{element.closeDate | date:'MMM dd, yyyy'}}</td>
                </ng-container>

                <ng-container matColumnDef="premium">
                    <th mat-header-cell *matHeaderCellDef> Premium</th>
                    <td mat-cell *matCellDef="let element" [ngStyle]="{'color': getColor(element.premium)}">
                        {{element.premium |
                        currency: 'USD' | customCurrency}}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row;columns:displayedColumns"></tr>

            </table>
        </div>
    </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-raised-button type="submit" (click)="saveTransaction()">{{inputData.title}}</button>
    <a (click)="closeForm()" mat-raised-button color="warn">Close</a>
</mat-dialog-actions>